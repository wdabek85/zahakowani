!function(a){"use strict";a(document).ready(function(){var e,r=a("#product_360_image_gallery"),l=a("#product_360_images_container").find("ul.product_360_images");a(".add_product_360_images").on("click","a",function(t){var i=a(this);t.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({title:i.data("choose"),button:{text:i.data("update")},states:[new wp.media.controller.Library({title:i.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var t=e.state().get("selection"),a=r.val();t.map(function(t){var e;(t=t.toJSON()).id&&(a=a?a+","+t.id:t.id,e=(t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail:t).url,l.append('<li class="image" data-attachment_id="'+t.id+'"><img src="'+e+'" /><ul class="actions"><li><a href="#" class="delete" title="'+i.data("delete")+'">'+i.data("text")+"</a></li></ul></li>"))}),r.val(a)}),e.open()}),void 0!==l.sortable&&l.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){var e="";a("#product_360_images_container").find("ul li.image").css("cursor","default").each(function(){var t=a(this).attr("data-attachment_id");e=e+t+","}),r.val(e)}}),a("#product_360_images_container").on("click","a.delete",function(){a(this).closest("li.image").remove();var e="";return a("#product_360_images_container").find("ul li.image").css("cursor","default").each(function(){var t=a(this).attr("data-attachment_id");e=e+t+","}),r.val(e),a("#tiptip_holder").removeAttr("style"),a("#tiptip_arrow").removeAttr("style"),!1})})}(jQuery);